<section class="container mt-70p pb-100p border-bottom border-line">
  <detail-post
  [data]="headliner"
  [shorten]="true"
  ></detail-post>
</section>

<section class="container mt-50p" id="archive">
  <div class="row mb-50p flex-column flex-md-row flex-nowrap justify-content-md-between">
    <div class="col">
      <h4 class="h4-temp mb-0">Upcoming Events</h4>
    </div>
    <div class="col mt-15p mt-md-0 text-right">
      <button 
      class="btn btn-filter subtitle1-temp"
      [ngClass]="{'btn-filter': !isDatePickerActive, 'btn-primary': isDatePickerActive}"
      (click)="showModal('date-picker')"
      >
        <i class="fas fa-sliders-h"></i>
        date picker
      </button>
      <button class="btn btn-filter subtitle1-temp ml-10p">
        <i class="fas fa-sort-amount-down"></i>
        Latest
      </button>
    </div>

  </div>
  <div class="row">
    <ng-container *ngFor="let p of archive; let i = index">
      <div class="col-12 mb-30p mb-md-55p">
        <card-event size="large" [data]="p" [showCategory]="false"></card-event>
      </div>
    </ng-container>
  </div>
</section>


<div 
*ngIf="isDatePickerShown"
class="modal-view"
>
  <div class="modal-drop"
  (click)="hideModal()"
  ></div>
  <div 
  class="modal-body"
  >

    <div class="title-container d-flex justify-content-between align-items-center">
      <span class="h5-temp h4-temp-md mr-3 flex-grow-1">Date Picker</span>
      <button class="btn pr-0" (click)="hideModal()">
        <i class="fas fa-times"></i>
      </button>  
    </div>

    <div class="content-container">
      <p class="body1-temp text-body mb-30p">Please select preferred date range</p>
      <div class="text-center">

        <ngb-datepicker #dp 
        (dateSelect)="onDateSelection($event)" 
        [displayMonths]="displayMonths"
        [minDate]="minDate" 
        [dayTemplate]="t" 
        outsideDays="hidden"
        ></ngb-datepicker>
        
        <ng-template #t let-date let-focused="focused">
          <span class="custom-day"
          [class.disabled]="isDisabled(date)"
          [class.focused]="focused"
          [class.range]="isRange(date)"
          [class.faded]="isHovered(date) || isInside(date)"
          (mouseenter)="hoveredDate = date"
          (mouseleave)="hoveredDate = null"
          >{{ date.day }}</span>
        </ng-template>

        <div class="d-flex justify-content-between mt-45p">
          <button
          class="btn btn-outline flex-grow-1 mr-15p"
          (click)="resetDatePicker()"
          >Reset</button>

          <button
          class="btn btn-primary flex-grow-1 ml-15p"
          [disabled]="!fromDate"
          (click)="hideModal()"
          >Update</button>
        </div>
        
      </div>
    </div>

  </div>
</div>