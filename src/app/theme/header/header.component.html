<header>
  <nav class="blur main-header position-fixed navbar-light shadow w-100" [ngClass]="{hide: !isHeaderShown}">
    <!-- <banner-top></banner-top> -->
    <div class="d-flex justify-content-between align-items-center p-md-2">
      <div class="ml-2 flex-grow-0 flex-shrink-0">
        <a class="navbar-brand" ref="#" [routerLink]="['/']">
          <img class="d-none d-md-block" src="assets/img/logo.png" />
          <img class="d-md-none brand-sm" src="assets/img/logo-sm.png" />
        </a>
      </div>
      <div class="mx-2 mx-md-4 flex-grow-1 flex-shrink-1">
        <form (submit)="keywordSearch()">
          <div class="searchbar rounded-pill d-flex justify-content-between overflow-hidden">
            <input type="text" aria-describedby="Search for Provider name/email"
              placeholder="Search for Provider name/email" [(ngModel)]="keyword" name="keyword" />
            <button
            *ngIf="keyword && keyword.length > 0"
            [@slideHorizontal]
            type="submit"
            class="btn btn-primary btn-search d-flex align-items-center"
            >
              <i class="fas fa-search"></i>
              <span class="pl-2 d-none d-md-inline">Search</span>
            </button>
          </div>
        </form>

      </div>
      <div *ngIf="!token; else logoutblock" class="d-none d-md-block flex-grow-0 glrex-shrink-0">
        <div class="d-flex align-items-center flex-nowrap">
          <!-- <a class="btn" data-toggle="modal" data-target="#loginmodal">Login</a> -->
          <a class="btn" [routerLink]="['/auth/login']">Login</a>
          <button type="button" class="btn btn-signup text-darkblue border-darkblue" (click)="signupModal.show()">Sign up</button>
        </div>
      </div>

      <ng-template #logoutblock>
        <div class="ml-auto d-none d-md-block w-160p position-relative">
          <dashboard-menu id="dashboardMenuButton" ui="button" buttonDirection="right"
            [styleButton]="{background: '#ffffff33'}" [user]="user"
            (click)="isDashboardMenuShown = !isDashboardMenuShown"></dashboard-menu>
          <div class="position-absolute top-10p dashboard-menu-wrapper-md">
          </div>
        </div>
      </ng-template>

      <div class="d-md-none flex-grow-0">
        <button class="btn btn-icon text-blue" (click)="showMenu()">
          <i class="fas fa-bars text-darkblue"></i>
        </button>
      </div>
    </div>

    <div class="d-none d-md-block w-100">
      <div class="d-flex justify-content-center align-items-center w-100">
        <div class="nav-item">
          <a class="nav-link" class="nav-link" [routerLink]="'/'">Home</a>
        </div>
        <div class="nav-item" (click)="showMenu(true)">
          <a class="nav-link">Find practitioners</a>
        </div>
        <div class="nav-item">
          <a class="nav-link" class="nav-link" [routerLink]="['/products']">Products/Services</a>
        </div>
        <div class="nav-item" *ngIf="priceType != null">
          <a *ngIf="priceType == 'practitioner'" class="nav-link" class="nav-link" [routerLink]="['/plans']">Pricing</a>
          <a *ngIf="priceType == 'product'" class="nav-link" class="nav-link" [routerLink]="['/plans/product']">Pricing</a>
        </div>
        <div class="nav-item">
          <a class="nav-link" class="nav-link" [routerLink]="['/blogs']">Blogs</a>
        </div>
      </div>
    </div>


    <!-- menu for medium view or more-->
    <div class="menu d-none" [ngClass]="(isMenuMobileForcibly) ? '' : 'd-md-block'"
      *ngIf="isNavMenuShown && catService.categoryList && catService.categoryList.length>0" [@slideVertical]>

      <div class="shadow menu_inner position-relative">
        <button class="btn close-menu btn-icon text-blue" (click)="hideMenu()">
          <i class="fas fa-times"></i>
        </button>
        <div class="close-menu-full" (click)="hideMenu()"></div>

        <div class="menu-title text-center font-bigger text-dark p-3">Start by selecting category</div>
        <div class="menu-category-group w-100">
          <div class="col-4 menu-category" (mousemove)="onMouseOverRootMenuCategory($event)">
            <ul class="category">
              <li *ngFor="let cat of catService.categoryList; let i = index" [ngClass]="{active: (activeCategory == i)}"
                (mouseover)="onMouseOverMenuMd(i)" (click)="onClickMenuMd(i)">
                <div class="highlighter"></div>
                <span>{{cat.item_text}}</span>
              </li>
            </ul>
          </div>
          <div class="col-8 menu-subcategory">
            <img [src]="'assets/img/services_' + catService.categoryList[activeCategory].image" />
            <ul class="category sub" [class]="classSubcategory">
              <li *ngFor="let sub of catService.categoryList[activeCategory].subCategory"
                [class]="classSubcategoryItem">
                <a [routerLink]="['/practitioners/category', sub._id]"
                  (click)="hideMenu()">{{sub.item_text}}</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="spacer-top" [ngClass]="{loggedin: token}"></div>

<dashboard-menu class="d-none d-md-block position-fixed dashboard-menu-wrapper-md" *ngIf="isDashboardMenuShown"
  [@fadeFast] [user]="user" [scrollDetector]="isDashboardMenuShown" [offset]="50"
  (detect)="isDashboardMenuShown = false;" (logout)="logout()" (clickOutside)="onClickOutsideOfDashboardMenuMd($event)"
  (close)="isDashboardMenuShown = false"></dashboard-menu>

<!-- Menu for Small view-->
<div class="menu-sm" id="menu_sm" [ngClass]="(!isMenuMobileForcibly) ? 'd-md-none' : ''" *ngIf="isNavMenuShown" [@fade]>
  <button class="btn close-menu-sm btn-icon text-blue" (click)="hideMenu()">
    <i class="fas fa-times"></i>
  </button>
  <ul class="menu-item font-weight-bold" [ngClass]="{before: (levelMenuSm > 0), after: (levelMenuSm < 0)}">
    <li><a class="text-blue" [routerLink]="'/'" (click)="hideMenu()">Home</a></li>
    <li><a class="text-blue" (click)="scrollMenuSm(1)">Find Practioners</a></li>
    <li><a class="text-blue" [routerLink]="['/products']" (click)="hideMenu()">Products/Services</a></li>
    <li *ngIf="priceType != null">
      <a *ngIf="priceType == 'practitioner'" class="text-blue" [routerLink]="['/plans']" (click)="hideMenu()">Pricing</a>
      <a *ngIf="priceType == 'product'" class="text-blue" [routerLink]="['/plans/product']" (click)="hideMenu()">Pricing</a>
    </li>
    <li><a class="text-blue" [routerLink]="['/blogs']" (click)="hideMenu()">Blogs</a></li>

    <li *ngIf="!token">
      <!-- <a class="px-2 text-blue" data-toggle="modal" data-target="#loginmodal" (click)="hideMenu()">Log in</a> -->
      <a class="px-2 text-blue" [routerLink]="['/auth/login']" (click)="hideMenu()">Log in</a>
      <span class="display-inline-block mx-2">/</span>
      <a class="px-2 text-blue" (click)="hideMenu(); signupModal.show()">Sign up</a>
    </li>

    <li class="dashboard-menu-wrapper d-md-none" *ngIf="token">
      <dashboard-menu class="bg-white overflow-hidden" [user]="user" [styleMenu]="{ color: '#6d6e71'}"
        (close)="hideMenu()" (logout)="logout()"></dashboard-menu>
    </li>
  </ul>

  <ul class="menu-item sub" [ngClass]="{before: (levelMenuSm > 1), after: (levelMenuSm < 1)}">
    <li class="menu-subtitle font-weight-bold">
      <button class="btn btn-icon text-blue" (click)="scrollMenuSm(0)">
        <i class="fas fa-arrow-left"></i>
      </button>
      Find Practioners
    </li>
    <li *ngFor="let cat of catService.categoryList; let i = index">
      <span (click)="changeMenuCategory(i); scrollMenuSm(2)" class="d-flex justify-content-between">
        <span>{{cat.item_text}}</span>
        <i class="fas fa-chevron-right"></i>
      </span>
    </li>
  </ul>

  <ul class="menu-item sub" *ngIf="catService.categoryList && catService.categoryList.length > 0"
    [ngClass]="{before: (levelMenuSm > 2), after: (levelMenuSm < 2)}">
    <li class="menu-subtitle font-weight-bold d-flex align-items-center">
      <button class="btn btn-icon text-blue" (click)="scrollMenuSm(1)">
        <i class="fas fa-arrow-left"></i>
      </button>
      <span class="d-inline-block">
        {{catService.categoryList[activeCategory].item_text}}
      </span>
    </li>

    <li>
      <a class="font-weight-bold" [routerLink]="['/practitioners/category', catService.categoryList[activeCategory]._id]"
        (click)="hideMenu()">{{catService.categoryList[activeCategory].item_text}}</a>
    </li>

    <li *ngFor="let sub of catService.categoryList[activeCategory].subCategory">
      <a [routerLink]="['/practitioners/category', sub._id]"
        (click)="hideMenu()">{{sub.item_text}}</a>
    </li>
  </ul>
</div>



<!-- Modal signup -->
<div 
class="modal fade modal-signup" 
bsModal
#signupModal="bs-modal"
tabindex="-1" 
role="dialog" 
aria-labelledby="exampleModalLabel"
aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content rounded-15p position-relative p-4">
      <div class="image-container position-absolute bg-white rounded-circle">
        <img src="/assets/img/signup-modal.png" alt="sign up">
      </div>
      <h2 class="my-3 text-ph-blue">I AM <span class="hidden-i5">...</span></h2>

      <div class="mt-3 d-flex justify-content-between flex-column flex-md-row position-relative">
        <a class="btn btn-outline-primary font-regular px-4 rounded-10p mx-md-4 flex-grow-1" data-dismiss="modal" (click)="setPriceType(); signupModal.hide()" [routerLink]="['/auth/registration/u']">Health Seeker</a>
        <a *ngIf="(role == 'SP' || role == 'C') || !onProductPage" class="btn btn-primary font-regular px-4 rounded-10p mt-3 mt-md-0 mx-md-4 flex-grow-1" (click)="setPriceType('practitioner'); signupModal.hide()" [routerLink]="['/plans']">Health Provider</a>
        <a *ngIf="role == 'P' || onProductPage" class="btn btn-primary font-regular px-4 rounded-10p mt-3 mt-md-0 mx-md-4 flex-grow-1" (click)="setPriceType('product'); signupModal.hide()" [routerLink]="['/plans/product']">Product Provider</a>
      </div>
  </div>
</div>

<!-- Modal login -->
<!-- <div class="modal fade" id="loginmodal" tabindex="-1" role="dialog" aria-labelledby="loginmodal" aria-hidden="true">
  <div class="modal-dialog" role="document" style="margin: auto !important;width:100%">
    <div class="modal-content mk-border">
      <div class="modal-header">
        <h5 class="modal-title w-100 text-center" id="exampleModalLabel" style="text-indent: 56px;">
          Login
        </h5>
        <button #signin type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center pb-4">
        <div class="text-center">
          <img src="assets/img/logo.png" class="mb-3" style="max-width: 220px;" />
        </div>
        <div class="text-secondary font-weight-bold mb-3">Are You A</div>
        <a class="btn btn-primary w-100 mr-2" (click)="professionalOption = !professionalOption"
          style="max-width: 175px;">PROFESSIONAL</a>
        or
        <a class="btn btn-secondary w-100 ml-2" [routerLink]="['/auth/login', 'u']" (click)="optUserType('U')"
          data-dismiss="modal" style="max-width: 175px;" aria-label="Close">CLIENT</a>
      </div>
      <div class="mb-3" *ngIf="professionalOption">
        <div class="radio">
          <input type="radio" name="userTypeLogin" (change)="handleChange('/auth/login', 'sp')"
            (click)="optUserType('SP')" />
          <span>Service Provider</span>
        </div>
        <div class="radio">
          <input type="radio" name="userTypeLogin" (change)="handleChange('/auth/login', 'c')"
            (click)="optUserType('C')" />
          <span>Center</span>
        </div>
      </div>
    </div>
  </div>
</div> -->


<!-- Modal pricing -->
<div class="modal fade" id="pricingmodal" tabindex="-1" role="dialog" aria-labelledby="loginmodal" aria-hidden="true">
  <div class="modal-dialog" role="document" style="margin: auto !important;width:100%">
    <div class="modal-content mk-border">
      <div class="modal-header">
        <h5 class="modal-title w-100 text-center" id="pricingModalLabel" style="text-indent: 56px;">
          Pricing
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center pb-4">
        <div class="text-center">
          <img src="assets/img/logo.png" class="mb-3" style="max-width: 220px;" />
        </div>
        <div class="text-secondary font-weight-bold mb-3">Are You A</div>
        <a class="btn btn-primary w-100 mr-2" [routerLink]="['/plans']" data-dismiss="modal"
          aria-label="Close" style="max-width: 175px;">PROFESSIONAL</a>
        or
        <a class="btn btn-secondary w-100 ml-2" [routerLink]="['/plans']" data-dismiss="modal"
          style="max-width: 175px;" aria-label="Close">USER</a>
      </div>
    </div>
  </div>
</div>
