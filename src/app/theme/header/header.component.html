<header class="bg-primary-light sticky-top py-15p" [ngClass]="{hide: !isHeaderShown}">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <a routerLink="/">
          <img class="d-lg-none" src="assets/img/logo-sm.png" alt="PromptHealth">
          <img class="d-none d-lg-block" src="assets/img/logo.png" alt="PromptHealth">
        </a>
      </div>
      <nav>
        <div class="d-md-none">
          <button class="btn btn-icon" (click)="showMenu()">
            <i class="large" iconPh="menu"></i>
          </button>
        </div>  

        <ul class="d-none d-md-flex justify-content-between align-items-center list-unstyled subtitle2 mb-0">
          <li class="mx-10p">
            <a routerLink="/practitioners" class="text-body">Find Practitioners</a>
          </li>
          <li class="mx-10p">
            <a routerLink="/practitioners" class="text-body">Products</a>
          </li>
          <li class="mx-10p">About</li>
          <li *ngIf="priceType != null" class="mx-10p">
            <a *ngIf="priceType == 'practitioner'" class="text-body" routerLink="'/plans'" (click)="hideMenu()">Pricing</a>
            <a *ngIf="priceType == 'product'" class="text-body" routerLink="/plans/product" (click)="hideMenu()">Pricing</a>
          </li>
          <li class="mx-10p">
            <a routerLink="/blogs" class="text-body">Blogs</a>
          </li>

          <li class="mx-10p" *ngIf="!isLoggedIn">
            <a routerLink="/auth/login" class="text-body">Login</a> 
            / 
            <a (click)="signupModal.show()" class="text-body">Register</a>
          </li>
          <li class="mx-10p" *ngIf="isLoggedIn">
            <dashboard-menu id="dashboardMenuButton" ui="button" buttonDirection="right"
            [styleButton]="{background: '#ffffff33'}" [user]="user"
            (click)="isDashboardMenuShown = !isDashboardMenuShown"
            ></dashboard-menu>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</header>


<!-- <header> -->
  <!-- <nav class="blur main-header position-fixed navbar-light shadow w-100" [ngClass]="{hide: !isHeaderShown}"> -->

    <!-- <div class="d-none d-md-block w-100">
      <div class="d-flex justify-content-center align-items-center w-100">
        <div class="nav-item">
          <a class="nav-link" [ngClass]="{'px-2': (margin == 'narrow')}" [routerLink]="'/'">Home</a>
        </div>
        <div class="nav-item" (click)="showMenu(true)">
          <a class="nav-link" [ngClass]="{'px-2': (margin == 'narrow')}" >Find practitioners</a>
        </div>
        <div class="nav-item">
          <a class="nav-link" [ngClass]="{'px-2': (margin == 'narrow')}" [routerLink]="['/products']">Products/Services</a>
        </div>
        <div class="nav-item" *ngIf="priceType != null">
          <a *ngIf="priceType == 'practitioner'" class="nav-link" [ngClass]="{'px-2': (margin == 'narrow')}" [routerLink]="['/plans']">Pricing</a>
          <a *ngIf="priceType == 'product'" class="nav-link" [ngClass]="{'px-2': (margin == 'narrow')}" [routerLink]="['/plans/product']">Pricing</a>
        </div>
        <div class="nav-item">
          <a class="nav-link" [ngClass]="{'px-2': (margin == 'narrow')}" [routerLink]="['/blogs']">Blogs</a>
        </div>
      </div>
    </div> -->


    <!-- menu for medium view or more-->
    <!-- <div class="menu d-none" [ngClass]="(isMenuMobileForcibly) ? '' : 'd-md-block'"
      *ngIf="isNavMenuShown && catService.categoryList && catService.categoryList.length>0" [@slideVertical]>

      <div class="shadow menu_inner position-relative">
        <button class="btn close-menu btn-icon text-blue" (click)="hideMenu()">
          <i class="fas fa-times"></i>
        </button>
        <div class="close-menu-full" (click)="hideMenu()"></div>

        <div class="menu-title text-center font-bigger text-dark p-3">Start by selecting category</div>
        <div class="menu-category-group w-100">
          <div class="col-4 menu-category" (mousemove)="onMouseOverRootMenuCategory($event)">
            <ul class="category">
              <li *ngFor="let cat of catService.categoryList; let i = index" [ngClass]="{active: (activeCategory == i)}"
                (mouseover)="onMouseOverMenuMd(i)" (click)="onClickMenuMd(i)">
                <div class="highlighter"></div>
                <span>{{cat.item_text}}</span>
              </li>
            </ul>
          </div>
          <div class="col-8 menu-subcategory">
            <img [src]="'assets/img/services_' + catService.categoryList[activeCategory].image" />
            <ul class="category sub" [class]="classSubcategory">
              <li *ngFor="let sub of catService.categoryList[activeCategory].subCategory"
                [class]="classSubcategoryItem">
                <a [routerLink]="['/practitioners/category', sub._id]"
                  (click)="hideMenu()">{{sub.item_text}}</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div> -->
  <!-- </nav> -->
<!-- </header> -->

<dashboard-menu class="d-none d-md-block position-fixed dashboard-menu-wrapper-md" *ngIf="isDashboardMenuShown"
  [@fadeFast] [user]="user" [scrollDetector]="isDashboardMenuShown" [offset]="50"
  [ngStyle]="positionDashboardMenuMd"
  (detect)="isDashboardMenuShown = false;" (logout)="logout()" (clickOutside)="onClickOutsideOfDashboardMenuMd($event)"
  (close)="isDashboardMenuShown = false"></dashboard-menu>


<!-- Menu for Small view-->
<div class="menu-sm bg-primary-light" id="menu_sm" [ngClass]="(!isMenuMobileForcibly) ? 'd-md-none' : ''" *ngIf="isNavMenuShown" [@fade]>
  <button class="btn btn-icon close-menu-sm mt-15p mr-15p">
    <i class="large" iconPh="cross" (click)="hideMenu()"></i>
  </button>
  <ul class="menu-item font-weight-bold" [ngClass]="{before: (levelMenuSm > 0), after: (levelMenuSm < 0)}">
    <li>
      <list-item (onTap)="navigateTo('/')">
        <a class="subtitle1">Home</a>  
      </list-item>
    </li>
    <li>
      <list-item (onTap)="scrollMenuSm(1)" action="chevron-right">
        <a class="subtitle1">Find Practioners</a>  
      </list-item>
    </li>
    <li>
      <list-item (onTap)="navigateTo('/products')">
        <a class="subtitle1">Products/Services</a>  
      </list-item>
    </li>

    <li *ngIf="priceType == 'practitioner'" class="my-10p">
      <list-item (onTap)="navigateTo('/plans')">
        <a class="subtitle1">Pricing</a>  
      </list-item>
    </li>

    <li *ngIf="priceType == 'product'" class="my-10p">
      <list-item (onTap)="navigateTo('/plans/product')">
        <a class="subtitle1">Pricing</a>  
      </list-item>
    </li>

    <li>
      <list-item (onTap)="navigateTo('/blogs')">
        <a class="subtitle1">Blogs</a>  
      </list-item>
    </li>

    <li *ngIf="!isLoggedIn">
      <list-item>
        <span class="subtitle1">
          <a routerLink="/auth/login" (click)="hideMenu()">Log in</a>
          <span class="display-inline-block mx-2">/</span>
          <a routerLink="/auth/login" (click)="hideMenu(); signupModal.show()">Register</a>  
        </span>
      </list-item>
    </li>

    <li class="dashboard-menu-wrapper d-md-none" *ngIf="isLoggedIn">
      <dashboard-menu class="bg-white overflow-hidden" [user]="user" [styleMenu]="{ color: '#6d6e71'}"
        (close)="hideMenu()" (logout)="logout()"></dashboard-menu>
    </li>
  </ul>

  <ul class="menu-item sub" [ngClass]="{before: (levelMenuSm > 1), after: (levelMenuSm < 1)}">
    <li class="h6 mb-5p">
      <button class="btn btn-icon large" (click)="scrollMenuSm(0)">
        <i iconPh="arrow-left" class="text-primary"></i>
      </button>
    </li>
    <li *ngFor="let cat of catService.categoryList; let i = index">
      <list-item
      action="chevron-right"
      (onTap)="changeMenuCategory(i); scrollMenuSm(2)"
      >
        <a (click)="changeMenuCategory(i); scrollMenuSm(2)" class="d-flex justify-content-between subtitle1">
          <span>{{cat.item_text}}</span>
        </a>  
      </list-item>
    </li>
  </ul>

  <ul class="menu-item sub" *ngIf="catService.categoryList && catService.categoryList.length > 0"
    [ngClass]="{before: (levelMenuSm > 2), after: (levelMenuSm < 2)}">
    
    <li class="h6 mb-5p">
      <button class="btn btn-icon large" (click)="scrollMenuSm(1)">
        <i iconPh="arrow-left" class="text-primary"></i>
      </button>
    </li>

    <li>
      <list-item (onTap)="hideMenu()">
        <a 
        class="d-flex justify-content-between subtitle1"
        [routerLink]="['/practitioners/category', catService.categoryList[activeCategory]._id]"
        >
          <span>All of {{catService.categoryList[activeCategory].item_text}}</span>
        </a>  
      </list-item>
    </li>

    <li *ngFor="let sub of catService.categoryList[activeCategory].subCategory">
      <list-item (onTap)="hideMenu()">
        <a 
        class="d-flex justify-content-between subtitle1"
        [routerLink]="['/practitioners/category', sub._id]"
        >
          {{sub.item_text}}
        </a>  
      </list-item>
    </li>
  </ul>
</div>



<!-- Modal signup -->
<div 
class="modal fade modal-signup" 
bsModal
#signupModal="bs-modal"
tabindex="-1" 
role="dialog" 
aria-labelledby="exampleModalLabel"
aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content rounded-15p position-relative p-4">
      <div class="image-container position-absolute bg-white rounded-circle">
        <img src="/assets/img/signup-modal.png" alt="sign up">
      </div>
      <h2 class="my-3 text-ph-blue">I AM <span class="hidden-i5">...</span></h2>

      <div class="mt-3 d-flex justify-content-between flex-column flex-md-row position-relative">
        <a class="btn btn-outline-primary font-regular px-4 rounded-10p mx-md-4 flex-grow-1" data-dismiss="modal" (click)="setPriceType(); signupModal.hide()" [routerLink]="['/auth/registration/u']">Health Seeker</a>
        <a *ngIf="(role == 'SP' || role == 'C') || !onProductPage" class="btn btn-primary font-regular px-4 rounded-10p mt-3 mt-md-0 mx-md-4 flex-grow-1" (click)="setPriceType('practitioner'); signupModal.hide()" [routerLink]="['/plans']">Health Provider</a>
        <a *ngIf="role == 'P' || onProductPage" class="btn btn-primary font-regular px-4 rounded-10p mt-3 mt-md-0 mx-md-4 flex-grow-1" (click)="setPriceType('product'); signupModal.hide()" [routerLink]="['/plans/product']">Product Provider</a>
      </div>
  </div>
</div>