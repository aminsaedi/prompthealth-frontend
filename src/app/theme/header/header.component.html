<header class="bg-primary-light py-5p py-md-15p" [ngClass]="{hide: !isHeaderShown, shadow: isShadowShown}">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <a routerLink="/">
          <img class="d-md-none" src="assets/img/logo-sm.png" alt="PromptHealth" width="auto" height="20">
          <img class="d-none d-md-block" src="assets/img/logo.png" alt="PromptHealth" width="auto" height="25">
        </a>
      </div>
      <nav>
        <ul class="d-flex justify-content-between align-items-center list-unstyled mb-0 subtitle2 text-body">
          <li class="mx-15p d-none d-lg-block">
            <a routerLink="/practitioners" class="text-body">Find Practitioners</a>
          </li>
          <!-- <li class="mx-15p d-none d-lg-block">
            <a routerLink="/products" class="text-body">Products</a>
          </li> -->
          <li class="mx-10p d-none d-lg-block">
            <a routerLink="/about" class="text-body">About</a>
          </li>

          <li class="mx-10p d-none d-lg-block">
            <a routerLink="/plans" class="text-body">Get listed</a>
          </li>

          <!-- <li class="mx-15p d-none d-lg-block position-relative" (clickOutside)="hidePlanMenu()">
            <a class="text-body" (click)="onClickGetListed()">Get listed</a>
            <i iconPh="chevron-down" class="ml-5p"></i>
            <div 
            *ngIf="isPlanMenuShown"
            [@fade]
            class="px-30p bg-white rounded-12p shadow get-listed-md-container"
            >
              <a
              *ngFor="let item of planMenuData;"
              [routerLink]="[item.link]" 
              (click)="hidePlanMenu()"
              >
                <div class="py-30p border-bottom border-line">
                  <h6 class="d-flex">
                    <span class="flex-grow-1">
                      <i [iconPh]="item.icon" class="mr-10p text-primary-dark"></i>
                      <span class="text-body">{{item.title}}</span>
                    </span>
                    <i iconPh="chevron-right" class="text-placeholder"></i>
                  </h6>
                  <p class="mb-0 body2 text-label">{{item.text}}</p>
                </div>
              </a>
            </div>
          </li> -->

          <li 
          *ngIf="!isLoggedIn" 
          class="mx-15p d-none d-lg-block"
          >
            <a routerLink="/auth/login" class="text-body">Login</a> 
            / 
            <a routerLink="/auth/registration/u" class="text-body">Register</a>
          </li>

          <li 
          *ngIf="isLoggedIn" 
          class="mx-10p mx-lg-15p cursor-pointer"
          >
            <profile-image 
            [image]="user?.profileImage"
            (click)="onClickUserIcon()"
            ></profile-image>
          </li>
          <li class="ml-10p ml-lg-15p">
            <a routerLink="/community/feed" class="btn btn-primary small">
              <i iconPh="users"></i>
              <span>Community</span>
            </a>
          </li>
          <li class="d-lg-none">
            <button class="btn btn-icon small pr-0 py-5p ml-10p" (click)="showMenuSm()">
              <i iconPh="menu" class="large"></i>
            </button>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

<!-- Menu for Small view-->
<div class="menu-sm bg-primary-light" *ngIf="isMenuSmShown">
  <div class="py-5p py-md-15p container">
    <div class="d-flex justify-content-end align-items-center">
      <div *ngIf="user" class="mx-10p">
        <profile-image 
        [image]="user?.profileImage"
        (click)="onClickUserIcon()"
        ></profile-image>
      </div>
      <a routerLink="/community" class="btn btn-primary small ml-10p">
        <i iconPh="users"></i>
        <span>Community</span>
      </a>
      <button class="btn btn-icon small pr-0 py-5p ml-10p">
        <i class="large" iconPh="cross" (click)="hideMenuSm()"></i>
      </button>
    </div>

  </div>

  <div class="d-flex flex-nowrap overflow-hidden mt-60p" #menuSm>
    <div class="menu-inner">
      <div class="container">
        <list-item action="chevron-right" (onTap)="onClickMenuItemSm('/')">
          <div class="subtitle1" >Home</div>  
        </list-item>

        <list-item action="chevron-right" (onTap)="onClickMenuItemSm('/practitioners')">
          <div class="subtitle1">Find Practioners</div>  
        </list-item>

        <list-item action="chevron-right" (onTap)="onClickMenuItemSm('/about')">
          <div class="subtitle1">About</div>  
        </list-item>

        <!-- <list-item action="chevron-right" (onTap)="onClickMenuItemSm('/products')">
          <div class="subtitle1">Products/Services</div>  
        </list-item> -->

        <list-item action="chevron-right" (onTap)="onClickMenuItemSm('/plans')">
          <div class="subtitle1">Get listed</div>  
        </list-item>

        <!-- <list-item action="chevron-down" (onTap)="onClickGetListed()">
          <div class="subtitle1">Get listed</div>  
        </list-item>

        <div 
        *ngIf="isPlanMenuSmShown"
        [@expandVertical]
        >
          <list-item 
          *ngFor="let item of planMenuData;" 
          action="chevron-right"
          (onTap)="onClickMenuItemSm(item.link)"
          >
            <div class="subtitle1 text-primary mb-5p">
              <i [iconPh]="item.icon" class="mr-5p"></i>
              <span class="text-body">{{item.title}}</span>
            </div>
            <p class="mb-0 body2">{{item.text}}</p>
          </list-item>
        </div> -->

        <list-item *ngIf="!isLoggedIn">
          <div>
            <a class="subtitle1 text-body" (click)="onClickMenuItemSm('/auth/login')">Login</a>
            <span> / </span>
            <a class="subtitle1 text-body" (click)="onClickMenuItemSm('/auth/registration/u')">Register</a>
          </div>
        </list-item>
      </div>
    </div>
  </div> 
</div>


<modal 
id="user-menu"
[bodyStyle]="{padding: 0, maxWidth: '450px'}"
#modalUserMenu
>
<ng-container *ngIf="user">
  <div class="image-container-33pc bg-background">
    <button
    class="btn btn-icon-body small bg-white position-absolute"
    style="top: 10px; right: 10px; z-index: 10;"
    (click)="modalUserMenu.hide()"
    >
      <i iconPh="cross"></i>
    </button>
  </div>
  <div class="modal-user-menu-body">
    <div class="d-flex mt-5p">
      <div style="margin-top: -25px;">
        <profile-image
        [size]="70"
        [radius]="15"
        [image]="user?.profileImage"
        [option]="{dummyBgClass: 'bg-white'}"
        ></profile-image>
      </div>
      <div class="ml-15p">
        <div class="subtitle1 h5-md">
          <span>{{user.nickname}}</span>
          <i
          *ngIf="user.isVerified"
          iconPh="verified"
          class="text-primary ml-5p"
          ></i>
        </div>
        <div class="subtitle2 text-label">{{user.email}}</div>
      </div>
    </div>
    <div class="d-flex mt-20p">
      <a
      class="text-body"
      routerLink="/community/followings"
      [replaceUrl]="true"
      >
        <div class="subtitle2">Followings</div>
        <div class="h5">{{user.numFollowing}}</div>
      </a>
      <a
      *ngIf="!user.isU"
      class="ml-20p text-body"
      routerLink="/community/followers"
      [replaceUrl]="true"
      >
        <div class="subtitle2">Followers</div>
        <div class="h5">{{user.numFollower}}</div>
      </a>
    </div>
    <div class="mt-15p">
      <div class="mb-5p">
        <a
        *ngIf="!user.isU"
        class="btn btn-text-body small px-0"
        (click)="onClickUserMenuItem(['/community/profile', userId])"
        >
          <i iconPh="user" class="mr-5p"></i>
          <span>See my profile</span>
        </a>
      </div>
      <div class="mb-5p">
        <a
        *ngIf="!user.isU"
        class="btn btn-text-body small px-0"
        (click)="onClickUserMenuItem(['/community/create/article'])"
        >
          <i iconPh="file" class="mr-5p"></i>
          <span>Create new article</span>
        </a>
      </div>

      <div class="mb-5p">
        <a
        *ngIf="!user.isU"
        class="btn btn-text-body small px-0"
        (click)="onClickUserMenuItem(['/community/create/event'])"
        >
          <i iconPh="calendar" class="mr-5p"></i>
          <span>Create new event</span>
        </a>
      </div>
      <div class="mb-5p">
        <a
        class="btn btn-text-body small px-0"
        (click)="onClickUserMenuItem(['/dashboard/profilemanagement', (userRole == 'P' ? 'partner-profile' : 'my-profile')])"
        >
          <i iconPh="gear" class="mr-5p"></i>
          <span>Edit my profile</span>
        </a>
      </div>
      <!-- <div class="mb-5p">
        <a
        *ngIf="!user.isU"
        class="btn btn-text-body small px-0"
        (click)="onClickUserMenuItem(['/community/draft'])"
        >
          <i iconPh="note-text" class="mr-5p"></i>
          <span>See my drafts</span>
        </a>
      </div> -->
  
      <div>
        <a
        class="btn btn-text-error small px-0"
        (click)="onClickUserMenuItemLogout()"
        >
        <i iconPh="alert-circle" class="mr-5p"></i>
        <span>Logout</span>
      </a>
      </div>
    </div>
  </div>
</ng-container>
</modal>