<header>
  <nav class="blur navbar main-header position-fixed navbar-light shadow-sm w-100 plr-0-i5"
    [ngClass]="{hide: !isHeaderShown}"
    >
    <div class="nav-row">
      <div class="col col-sm-2 col-md-3 pl-0 pr-5-i5">
        <a class="navbar-brand mr-0" href="#">
          <img class="d-none d-md-block" src="assets/img/logo.png" />
          <img class="d-md-none brand-sm" src="assets/img/logo-sm.png"  width="auto" height="30" />
        </a>
      </div>
      <div class="col col-sm-8 col-md-6 p-0">
        <div class="searchbar">
          <input type="text"  aria-describedby="Search for anything" placeholder="Search for anything" />
        </div>
      </div>
      <div class=" col-3 d-none d-md-block" *ngIf="!this.user; else logoutblock">
        <div class="row justify-content-end align-items-center">
          <a class="btn btn-home" data-toggle="modal" data-target="#loginmodal">Login</a>
          <a class="btn btn-signup text-darkblue border-darkblue" data-toggle="modal" data-target="#signupModal">Sign up</a>
        </div>
      </div>

      <ng-template #logoutblock>
        <div class="ml-auto col d-none d-md-block">
          <img *ngIf="!user.profileImage" src="assets/img/default_user.jpg" class="user-img mr-2" />
          <img *ngIf="user.profileImage"
            src="AWS_S3 + {{updateData.profileImage?updateData.profileImage:user.profileImage}}"
            class="user-img mr-2" />
          <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
          aria-expanded="false">
            {{this.user.email}}
          </a>
          <div class="dropdown-menu">
            <a class="dropdown-item" [routerLink]="['/dashboard/profilemanagement/my-profile']">My Dashboard</a>
            <a class="dropdown-item" (click)="logout()">Logout</a>
          </div>
        </div>

      </ng-template>

      <div class="col col-sm-2 d-md-none pr-0 text-right pl-5-i5">
        <button class="btn btn-icon text-blue pr-0" (click)="showMenu()">
          <i class="fas fa-bars text-darkblue"></i>
        </button>
      </div>
      

    </div>

    <div class="d-none d-md-block w-100">
      <div class="nav-row justify-content-center">
        <div class="nav-item">
          <a class="nav-link" class="nav-link" [routerLink]="'/'">Home</a>
        </div>
<!--        <div class="nav-item" (mouseenter)="showMenu()" (click)="showMenu()"> -->
        <div class="nav-item" (click)="showMenu()">
          <a class="nav-link">Category</a>
        </div>
        <div class="nav-item">
          <a class="nav-link" class="nav-link">Solutions</a>
        </div>
        <div class="nav-item">
          <a class="nav-link" class="nav-link" [routerLink]="['/blogs']">Blogs</a>
        </div>
      </div>
    </div>


    <!-- menu for medium view or more-->
    <div class="menu d-none d-md-block" *ngIf="isNavMenuShown && categoryList" [@fade]>
      <div class="menu-close" (click)="hideMenu()"></div>

      <div class="shadow menu_inner">
        <div class="menu-title center">Service/Goal</div>
        <div class="menu-category-group w-100">
          <div class="col-4 menu-category">
            <ul class="category">
              <li *ngFor="let cat of categoryList; let i = index" [ngClass]="{active: (activeCategory == i)}" (click)="changeMenuCategory(i)">
                <div class="highlighter"></div>
                <span>{{cat.item_text}}</span>
              </li>
            </ul>
          </div>
          <div class="col-8 menu-subcategory">
            <img [src]="'assets/img/services_' + categoryList[activeCategory].label + '.png'"/>
            <ul class="category sub"
              [class]="classSubcategory"
            >
              <li *ngFor="let sub of categoryList[activeCategory].subCategory"
                [class]="classSubcategoryItem"
              >
                <a [routerLink]="['/dashboard/listing']"
                  [queryParams]=" {id: sub._id, type: 'goal'}"
                  (click)="hideMenu()"
                >{{sub.item_text}}</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="spacer-top"></div>

<!-- Menu for Small view-->
<div class="menu-sm d-md-none" id="menu_sm" *ngIf="isNavMenuShown" [@fade]>
  <button class="btn close-menu-sm btn-icon text-blue" (click)="hideMenu()">
    <i class="fas fa-times"></i>
  </button>
  <ul class="menu-item font-weight-bold"
    [ngClass]="{before: (levelMenuSm > 0), after: (levelMenuSm < 0)}"
  >
    <li [routerLink]="'/'" (click)="hideMenu()">Home</li>
    <li (click)="scrollMenuSm(1)">Category</li>
    <li>Solution</li>
    <li [routerLink]="['/blogs']"  (click)="hideMenu()">Blogs</li>
    <li>Log in/Sign up</li>
  </ul>

  <ul class="menu-item sub"
    [ngClass]="{before: (levelMenuSm > 1), after: (levelMenuSm < 1)}"
  >
    <li class="menu-subtitle font-weight-bold">
      <button class="btn btn-icon text-blue" (click)="scrollMenuSm(0)">
        <i class="fas fa-arrow-left"></i>
      </button>
      Category
    </li>
    <li *ngFor="let cat of categoryList; let i = index"
      (click)="changeMenuCategory(i); scrollMenuSm(2)"
    >{{cat.item_text}}</li>
  </ul>

  <ul class="menu-item sub"
    [ngClass]="{before: (levelMenuSm > 2), after: (levelMenuSm < 2)}"
  >
    <li class="menu-subtitle font-weight-bold d-flex align-items-center">
      <button class="btn btn-icon text-blue" (click)="scrollMenuSm(1)">
        <i class="fas fa-arrow-left"></i>
      </button>
      <span class="d-inline-block">
        {{categoryList[activeCategory].item_text}}
      </span>
    </li>
    <li *ngFor="let sub of categoryList[activeCategory].subCategory">
      <a [routerLink]="['/dashboard/listing']"
        [queryParams]=" {id: sub._id, type: 'goal'}"
        (click)="hideMenu()"
      >{{sub.item_text}}</a>
    </li>
  </ul>
</div>



<!-- Modal signup -->
<div class="modal fade" id="signupModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document" style="margin: auto !important;width:100%">
    <div class="modal-content mk-border">
      <div class="modal-header">
        <h5 class="modal-title w-100 text-center" id="exampleModalLabel" style="text-indent: 56px;">
          Join network
        </h5>
        <button #signup type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center pb-4">
        <div class="text-center">
          <img src="assets/img/logo.png" class="mb-3" style="max-width: 220px;" />
        </div>
        <div class="text-secondary font-weight-bold mb-3">Are You A</div>
        <a class="btn btn-primary w-100 mr-2" (click)="professionalOption = !professionalOption"
          style="max-width: 175px;">PROFESSIONAL</a>
        or
        <a class="btn btn-secondary w-100 ml-2" [routerLink]="['/auth/registration', 'u']" data-dismiss="modal"
          style="max-width: 175px;" aria-label="Close">CLIENT</a>
      </div>
      <div class="mb-3 text-center" *ngIf="professionalOption">
        <div class="radio mb-3">
          <input type="radio" name="userType" (change)="handleChange('/auth/registration', 'sp')" />
          <span class="font-weight-bold">Service Provider</span>
        </div>
        <div class="radio">
          <input type="radio" name="userType" (change)="handleChange('/auth/registration', 'c')" />
          <span class="font-weight-bold">Center</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal login -->
<div class="modal fade" id="loginmodal" tabindex="-1" role="dialog" aria-labelledby="loginmodal" aria-hidden="true">
  <div class="modal-dialog" role="document" style="margin: auto !important;width:100%">
    <div class="modal-content mk-border">
      <div class="modal-header">
        <h5 class="modal-title w-100 text-center" id="exampleModalLabel" style="text-indent: 56px;">
          Login
        </h5>
        <button #signin type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center pb-4">
        <div class="text-center">
          <img src="assets/img/logo.png" class="mb-3" style="max-width: 220px;" />
        </div>
        <div class="text-secondary font-weight-bold mb-3">Are You A</div>
        <a class="btn btn-primary w-100 mr-2" (click)="professionalOption = !professionalOption"
          style="max-width: 175px;">PROFESSIONAL</a>
        or
        <a class="btn btn-secondary w-100 ml-2" [routerLink]="['/auth/login', 'u']" (click)="optUserType('U')"
          data-dismiss="modal" style="max-width: 175px;" aria-label="Close">CLIENT</a>
      </div>
      <div class="mb-3" *ngIf="professionalOption">
        <div class="radio">
          <input type="radio" name="userTypeLogin" (change)="handleChange('/auth/login', 'sp')"
            (click)="optUserType('SP')" />
          <span>Service Provider</span>
        </div>
        <div class="radio">
          <input type="radio" name="userTypeLogin" (change)="handleChange('/auth/login', 'c')"
            (click)="optUserType('C')" />
          <span>Center</span>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Modal pricing -->
<div class="modal fade" id="pricingmodal" tabindex="-1" role="dialog" aria-labelledby="loginmodal" aria-hidden="true">
  <div class="modal-dialog" role="document" style="margin: auto !important;width:100%">
    <div class="modal-content mk-border">
      <div class="modal-header">
        <h5 class="modal-title w-100 text-center" id="pricingModalLabel" style="text-indent: 56px;">
          Pricing
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center pb-4">
        <div class="text-center">
          <img src="assets/img/logo.png" class="mb-3" style="max-width: 220px;" />
        </div>
        <div class="text-secondary font-weight-bold mb-3">Are You A</div>
        <a class="btn btn-primary w-100 mr-2" [routerLink]="['/subscriptionplan']" data-dismiss="modal"
          aria-label="Close" style="max-width: 175px;">PROFESSIONAL</a>
        or
        <a class="btn btn-secondary w-100 ml-2" [routerLink]="['/subscriptionplan']" data-dismiss="modal"
          style="max-width: 175px;" aria-label="Close">USER</a>
      </div>
    </div>
  </div>
</div>
