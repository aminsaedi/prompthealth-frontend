<ngx-spinner bdColor="#fff" size="medium" color="#fff">
  <p style="font-size: 20px; color: white" class="loaderbg">
    <img src="assets/img/favicon.jpg" class="loader-logo" width="100" />
  </p>
</ngx-spinner>
<!-- 
<a class="btn btn-secondary" routerLink="../create">Add New Post (in profile management)</a> -->

<div class="d-flex justify-content-between align-items-center mb-35p">
  <h4 class="mb-0">My Posts ({{postsTotal}})</h4>
  <a class="btn btn-primary" routerLink="/dashboard/my-posts/create">Add New Post</a>
</div>

<div class="d-flex justify-content-start align-items-center flex-column flex-md-row">
  <div class="d-flex align-items-center mr-25p mb-10p mb-md-0">
    <span class="subtitle2-temp mr-15p">Filter: </span>
    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <span *ngIf="!statusSelected">Normal</span>
        <span *ngIf="statusSelected && statusSelected != 'ALL'">{{statusNameSelected}}</span>
        <span *ngIf="statusSelected == 'ALL'">All</span>

      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <button class="dropdown-item" (click)="onChangeFilterStatus()">Normal</button>
        <button
        *ngFor="let s of statuses" 
        class="dropdown-item" 
        (click)="onChangeFilterStatus(s)"
        >{{statusNameOf(s)}}</button>
        <button class="dropdown-item" (click)="onChangeFilterStatus('ALL')">All</button>
      </div>
    </div>  
  </div>
  <div class="d-flex align-items-center">
    <span class="subtitle2-temp mr-15p">Category: </span>
    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        {{categoryNameSelected}}
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <button class="dropdown-item" (click)="onChangeFilterCategory()">All</button>
        <button 
        *ngFor="let c of categories" 
        class="dropdown-item" 
        (click)="onChangeFilterCategory(c)"
        >{{c.title}}</button>
      </div>
    </div>  
  </div>
</div>

<ul class="mt-25p p-0 list-unstyled">
  <li *ngFor="let p of posts; let i = index" class="mb-15p py-15p border-bottom">
    <a [routerLink]="['/dashboard/my-posts/edit', p._id]">
      <h6 class="subtitle1-temp">{{p.title}}</h6>
    </a>
    <div class="body-small-temp d-flex">
      <span 
      class="border rounded-pill px-3 py-1 mr-15p"
      [ngClass]="{'text-white bg-danger': (p.status == 'REJECTED')}"
      >{{statusNameOf(p.status)}}</span>
      <span
      *ngIf="p.category"
      class="border rounded-pill px-3 py-1"
      >{{p.catTitle}}</span>
    </div>
    <div class="d-flex justify-content-between mt-15p">
        <div class="d-flex">
          <a [routerLink]="['/dashboard/my-posts/edit', p._id]" class="btn mr-30p px-0">Edit</a>
          <a [routerLink]="['/magazines/', p.slug]" class="btn px-0">View</a>  
        </div>
        <button class="btn text-danger mr-10p" type="button" (click)="hidePost(p)">
          <i class="fas fa-trash"></i>
        </button>
      </div>
  </li>
</ul>

<div>
  <pagination 
  [totalItems]="postsTotal" 
  [itemsPerPage]="countPerPage"
  [directionLinks]="true"
  [boundaryLinks]="true"
  (pageChanged)="onChangePage($event)"
  ></pagination>
</div>