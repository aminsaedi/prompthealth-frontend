<div 
class="bg-background"
style="min-height: 100vh;"
>
  <div class="sticky-top" style="z-index: 90;">
    <header-social></header-social>
    <div 
    *ngIf="user && !user.isApproved && this.isMessageBeingApprovedShownIfNeeded"
    class="bg-line overflow-hidden"
    (click)="onClickAlertBeingApproved()"
    [@expandVertical]
    >
      <div class="container py-15p d-flex align-items-center justify-content-between">
        <p class="mb-0">
          Your profile is being reviewed by our administrator and won't be shown in 
          <ng-container *ngIf="user.role == 'P'">product listing page</ng-container>
          <ng-container *ngIf="user.role != 'P'">Expert Finder </ng-container>
          just yet.
        </p>
        <i iconPh="cross"></i>
      </div>
    </div>
  </div>

  <div class="pt-30p pb-100p">
    <router-outlet></router-outlet>
  </div>  
</div>

<modal-event></modal-event>

<modal 
id="user-menu"
[bodyStyle]="{padding: 0, maxWidth: '450px'}" 
#modalUserMenu
>
  <ng-container *ngIf="user">
    <div class="image-container-33pc bg-background">
      <button
      class="btn btn-icon-body small bg-white position-absolute"
      style="top: 10px; right: 10px; z-index: 10;"
      (click)="modalUserMenu.hide()"
      >
        <i iconPh="cross"></i>
      </button>
    </div>
    <div class="modal-user-menu-body">
      <div class="d-flex mt-5p">
        <div style="margin-top: -25px;">
          <profile-image
          [size]="70"
          [radius]="15"
          [image]="user?.profileImage"
          [option]="{dummyBgClass: 'bg-white'}"
          ></profile-image>
        </div>
        <div class="ml-15p">
          <div class="subtitle1 h5-md">
            <span>{{user.nickname}}</span>
            <i
            *ngIf="user.isVerified"
            iconPh="verified"
            class="text-primary ml-5p"
            ></i>
          </div>
          <div class="subtitle2 text-label">{{user.email}}</div>
        </div>
      </div>
      <div class="d-flex mt-20p">
        <a
        class="text-body"
        routerLink="/community/followings"
        [replaceUrl]="true"
        >
          <div class="subtitle2">Followings</div>
          <div class="h5">{{user.numFollowing}}</div>
        </a>
        <a
        *ngIf="!user.isU"
        class="ml-20p text-body"
        routerLink="/community/followers"
        [replaceUrl]="true"
        >
          <div class="subtitle2">Followers</div>
          <div class="h5">{{user.numFollower}}</div>
        </a>
      </div>
      <div class="mt-15p">
        <div class="mb-5p">
          <a
          *ngIf="!user.isU"
          class="btn btn-text-body small px-0"
          (click)="onClickUserMenuItem(['/community/profile', userId])"
          >
            <i iconPh="user" class="mr-5p"></i>
            <span>My profile</span>
          </a>
        </div>

        <div class="mb-5p">
          <a
          *ngIf="!user.isU"
          class="btn btn-text-body small px-0"
          (click)="onClickUserMenuItem(['/community/create/article'])"
          >
            <i iconPh="file" class="mr-5p"></i>
            <span>Create new article</span>
          </a>
        </div>

        <div class="mb-5p">
          <a
          *ngIf="!user.isU"
          class="btn btn-text-body small px-0"
          (click)="onClickUserMenuItem(['/community/create/event'])"
          >
            <i iconPh="calendar" class="mr-5p"></i>
            <span>Create new event</span>
          </a>
        </div>

        <div class="mb-5p">
          <a
          class="btn btn-text-body small px-0"
          (click)="onClickUserMenuItem(['/dashboard/profilemanagement', (userRole == 'P' ? 'partner-profile' : 'my-profile')])"
          >
            <i iconPh="gear" class="mr-5p"></i>
            <span>Settings</span>
          </a>
        </div>
        <!-- <div class="mb-5p">
          <a
          *ngIf="!user.isU"
          class="btn btn-text-body small px-0"
          (click)="onClickUserMenuItem(['/community/draft'])"
          >
            <i iconPh="note-text" class="mr-5p"></i>
            <span>See my drafts</span>
          </a>
        </div> -->
    
        <div>
          <a
          class="btn btn-text-error small px-0"
          (click)="onClickUserMenuItemLogout()"
          >
          <i iconPh="alert-circle" class="mr-5p"></i>
          <span>Logout</span>
        </a>
        </div>
      </div>
    </div>
  </ng-container>
</modal>


<modal 
id="login-menu" 
#modalLoginMenu
>
  <div class="title-container d-flex justify-content-between align-items-center">
    <span class="h5 h4-md mr-3 mb-0 flex-grow-1">Login</span>
    <button class="btn pr-0 btn-icon" (click)="modalLoginMenu.hide()">
      <i iconPh="cross"></i>
    </button>  
  </div>

  <div class="content-container">
    <form-auth [staySamePage]="true" (changeState)="onChangeLoginState($event)"></form-auth>
  </div>
</modal>


<modal
id="more-menu"
#modalMoreMenu
>
  <div class="title-container d-flex justify-content-between align-items-center">
    <span class="h5 h4-md mr-3 mb-0 flex-grow-1">What items should be added?</span>
    <button class="btn pr-0 btn-icon" (click)="modalMoreMenu.hide()">
      <i iconPh="cross"></i>
    </button>  
  </div>

  <div class="content-container">
  </div>
</modal>

<modal
id="post-menu"
#modalPostMenu
>
  <div class="title-container d-flex justify-content-between align-items-center">
    <div 
    class="d-flex"
    [ngClass]="(postTitleForModal ? 'algin-items-start' : 'align-items-center')"
    >
      <profile-image [image]="postForModal?.authorImage"></profile-image>
      <div class="mx-3">
        <span class="subtitle2 text-label">{{postForModal?.author}}</span>
        <span 
        *ngIf="postTitleForModal"
        class="h5 h4-md mb-0 flex-grow-1 clamp-1line"
        >{{postTitleForModal}}</span>
      </div>
    </div>
    <button class="btn pr-0 btn-icon" (click)="modalPostMenu.hide()">
      <i iconPh="cross"></i>
    </button>  
  </div>

  <div class="content-container">
    <ul class="list-unstyled">
      <li>
        <button class="btn btn-text-body px-0">Report as spam</button>
      </li>
      <li>
        <button class="btn btn-text-body px-0">Mark as not interested</button>
      </li>
    </ul>
  </div>
</modal>

<modal
id="subscirbe-menu"
#modalSubscribeMenu
>

</modal>