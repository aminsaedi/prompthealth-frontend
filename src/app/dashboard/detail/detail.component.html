<section
  class="bg-cover detailbanner"
  style="background-image: url(assets/img/professional-banner.png);"
></section>
<div class="container pb-4">
  <div class="shadow bg-white">
    <div class="p-3">
      <div class="row align-items-center">
        <div class="col-md-4">
          <div class="d-inline-flex">
            <img
              [src]="'http://3.12.81.245:3000/public/images/users/'+userInfo?.profileImage"
              class="rounded-circle border detailprofileimg"
            />
            <div class="p-2">
              <div class="text-uppercase font-weight-bold text-primary">
                {{userInfo?.firstName}} {{userInfo?.lastName}}
              </div>
              <div class="text-primary">({{userInfo?.gender}})</div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <ul class="check_ul font-weight-normal">
            <li class="fa-map-marker">
              {{userInfo?.address}}
            </li>
            <a
              href="mailto:{{userInfo?.email}}"
              class="fa-envelope text-primary d-inline-block mr-2"
            >
            {{userInfo?.email}}
            </a>
            <a
              href="tel:{{userInfo?.phone}}"
              class="fa-phone text-primary d-inline-block"
              >{{userInfo?.phone}}</a
            >
          </ul>
        </div>
        <div class="col-md-4 text-right">
          <!-- <a
            href=""
            data-toggle="modal"
            data-target="#messagemodal"
            class="btn btn-primary mb-3"
          >
            <i class="fa fa-comment"></i>
            Message
          </a> -->

          <div class="font-weight-bold mb-2">
            Standard Hourly Fees: <span class="text-primary">$ {{userInfo?.price_per_hours}}</span>
          </div>
            <div *ngIf="userInfo?.booking === 'no'">
              <a class="btn btn-outline-primary" data-toggle="modal" data-target="#bookingmodal">Raise Booking Request</a>  
            </div> 
            <div *ngIf="userInfo?.booking === 'yes'">
              <a href="{{userInfo?.bookingURL}}" target="_blank" class="btn btn-outline-primary">Book Now</a> 
            </div> 
        </div>
      </div>
    </div>
    <!-- Nav tabs -->
    <ul class="nav bg-light font-weight-normal" id="pills-tab" role="tablist">
      <li class="nav-item">
        <a
          class="nav-link active"
          id="information-tab"
          data-toggle="pill"
          href="#pills-information"
          role="tab"
          aria-controls="pills-information"
          aria-selected="true"
          >Basic Information</a
        >
      </li>

      <li class="nav-item">
        <a
          class="nav-link"
          id="service-tab"
          data-toggle="pill"
          href="#pills-service"
          role="tab"
          aria-controls="pills-service"
          aria-selected="false"
          (click) = "getUserServices()"
          >Service Information</a
        >
      </li>
      <li class="nav-item">
        <a
          class="nav-link"
          id="professional-tab"
          data-toggle="pill"
          href="#pills-professional"
          role="tab"
          aria-controls="pills-professional"
          aria-selected="false"
          >Professional Background</a
        >
      </li>
      <li class="nav-item" *ngIf="roles === 'C'">
        <a
          class="nav-link"
          id="Activity-tab"
          data-toggle="pill"
          href="#pills-videos"
          role="tab"
          aria-controls="pills-Videos"
          aria-selected="false"
          >My Videos</a
        >
      </li>
      <li class="nav-item" *ngIf="roles === 'C'">
        <a
          class="nav-link"
          id="Activity-tab"
          data-toggle="pill"
          href="#pills-products"
          role="tab"
          aria-controls="pills-product"
          aria-selected="false"
          (click) ="getProductList()"
          >My Product</a
        >
      </li>
      <li class="nav-item" *ngIf="roles === 'C'">
        <a
          class="nav-link"
          id="Activity-tab"
          data-toggle="pill"
          href="#pills-amenity"
          role="tab"
          aria-controls="pills-product"
          aria-selected="false"
          (click) ="getSavedAmenties()"
          >My Amenities</a
        >
      </li>
    </ul>
    <!-- Tab panes -->
    <div class="tab-content p-3">
      <div
        class="tab-pane active"
        id="pills-information"
        role="tabpanel"
        aria-labelledby="information-tab"
      >
        <table class="table table-borderless informationtable">
          <tbody>
            <tr>
              <th>Practice Philosophy:</th>
              <td>
                {{userInfo?.product_description}}
              </td>
            </tr>
            <tr>
              <th>Age Group:</th>
              <td>
                {{userInfo?.age_range}}
              </td>
            </tr>
            <tr>
              <th>Language Fluency:</th>
              <td>
                {{userInfo?.languages}}</td>
            </tr>
            <tr>
              <th>Year Of Experience:</th>
              <td>
                  {{userInfo?.years_of_experience}}
            </td>
            </tr>
            <tr>
              <th>Description:</th>
              <td>{{userInfo?.product_description}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div
        class="tab-pane"
        id="pills-service"
        role="tabpanel"
        aria-labelledby="service-tab"
      >
        <table class="table table-borderless informationtable">
          <tbody>
            <tr *ngIf="serviceData">
              <th>Services:</th>
              <td>
                <div class="row">
                <div *ngFor="let special of serviceData?.ans" class="col-sm-4 services">
                  {{special.item_text}}
                </div>
                </div>
              </td>
            </tr>
            <!-- <tr>
              <th>Treatment Approaches:</th>
              <td>
                Behavioral , Cognitive Behavioral Therapy (CBT), Cognitive
                Therapy (CT), Family Systems, Positive Psychology,
                Psychoeducational, Supportive
              </td>
            </tr>
            <tr>
              <th>Insurance Accepted:</th>
              <td>BlueCross and BlueShield, Medicare</td>
            </tr> -->
            <tr>
              <th>Standard Hourly Price:</th>
              <td>
                ${{userInfo?.price_per_hours}}
              </td>
            </tr>
            <!-- <tr>
              <th>Service Types:</th>
              <td>
                Individual therapy, Couples therapy, Family therapy,
                Consultation only (single visit)
              </td>
            </tr> -->
          </tbody>
        </table>
      </div>
      <div
        class="tab-pane"
        id="pills-professional"
        role="tabpanel"
        aria-labelledby="professional-tab"
      >
      <!-- <h3>Work in progress...</h3> -->
        <table class="table table-borderless informationtable">
          <tbody>
            <!-- <tr>
              <th>Education:</th>
              <td>
                University of Wisconsin School of Social Work (Madison,
                Wisconsin)
              </td>
            </tr>
            <tr>
              <th>Degree:</th>
              <td>M.S.W. (1975)</td>
            </tr>
            <tr>
              <th>State of Licensure:</th>
              <td>Illinois</td>
            </tr> -->
            <tr>
              <th>License Number:</th>
              <td>{{ userInfo?.licence_type_degree }}</td>
            </tr>
            <!-- <tr>
              <th>Years of Experience:</th>
              <td>42 years</td>
            </tr> -->
            <tr>
              <th>Booking URL:</th>
              <td>{{ userInfo?.bookingURL}}</td>
            </tr>
            <tr>
              <th>Professional Organzation:</th>
              <td>{{ userInfo?.professional_organization  }}</td>
            </tr>
            <!-- <tr>
              <th>Organzation Affiliations:</th>
              <td></td>
            </tr> -->
          </tbody>
        </table>
      </div>
      <div
        class="tab-pane"
        id="pills-videos"
        role="tabpanel"
        aria-labelledby="Activity-tab"
      >
        <h5 class="mb-0">Videos</h5>
        <hr />
        <div class="d-flex mb-4" *ngFor="let video of userInfo?.videos">
          <div class="col-sm-4">
          <div class="p-2">
            <h6 class="text-primary text-uppercase">{{ video.title }}</h6>
            <iframe width="266" height="343" [src]="video.url | embededUrl" frameborder="0" allowfullscreen></iframe>
           
          </div>
        </div>

        </div>
        <!-- <div class="text-center">
          <div
            class="px-3 py-2 bg-primary rounded d-inline-block h4 text-light"
          >
            <i class="fa fa-question"></i>
          </div>
          <h4>No records found.</h4>
        </div> -->
      </div>
      <div
        class="tab-pane product-list"
        id="pills-products"
        role="tabpanel"
        aria-labelledby="blog-tab"
      >

        <input  *ngIf="productList && productList.length" type="text" [(ngModel)]="productSearch" placeholder="Serach.." class="form-control searchBar"/>
        <table class="table table-hover comparetable" *ngIf="productList && productList.length; else noProduct">
        <thead>
            <tr>
                <th>
                    <h5>Title</h5>
                </th>
                <th>
                    <h5>Description</h5>
                </th>
                <th>
                    <h5>Price</h5>
                </th>
                <th>
                    <h5>Images</h5>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let prod of productList | customFilter:productSearch;let i = index">
                <td>
                    {{ prod.slug }}
                </td>
                <td>
                    {{ prod.description }}
                </td>
                <td>
                    {{ prod.price }}
                </td>
                <td>
                    <div class="img-list" *ngFor="let img of prod.images; let i=index">
                        <img [src]="'http://3.12.81.245:3000/public/images/products/' + img" />
                    </div>
                </td>
            </tr>
        </tbody>
        </table>
        <ng-template #noProduct>
          <h5>No product listed...</h5>
        </ng-template>
      </div>
      <div
        class="tab-pane"
        id="pills-amenity"
        role="tabpanel"
        aria-labelledby="Activity-tab"
      >
        <h5 class="mb-0">My Amenities</h5>
        <hr />
        <div class="d-flex mb-4" *ngFor="let amenity of savedAminities">
          <div class="col-sm-4">
            <h6 class="text-primary text-uppercase">{{ amenity.defaultamenityId.item_text }}</h6>
          </div>
          <div class="col-sm-8">
              <span *ngFor="let uimg of amenity.images">
                <img [src]="'http://3.12.81.245:3000/public/images/amenities/' + uimg" />
              </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal login -->
<div
  class="modal fade"
  id="messagemodal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="messagemodal"
  aria-hidden="true"
>
  <div
    class="modal-dialog"
    role="document"
    style="margin: auto !important;width:100%"
  >
    <div class="modal-content mk-border position-relative">
      <div class="modal-header">
        <h5 class="modal-title w-100 text-center">
          <img
            src="assets/img/logo.png"
            class="mb-3"
            style="max-width: 220px;"
          />
        </h5>
        <button
          type="button"
          class="close position-absolute"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body pb-4">
        <div class="form-row">
          <div class="col-md-12 mb-3">
            <label>Email Address <span class="text-danger">*</span></label>
            <input
              type="text"
              class="form-control"
              placeholder="Enter Your Email Address"
            />
          </div>
          <div class="col-md-12 mb-3">
            <label>Password <span class="text-danger">*</span></label>
            <input
              type="password"
              class="form-control"
              placeholder="Enter Your Password"
            />
          </div>
          <div class="col-md-12 d-flex justify-content-between">
            <div class="small">
              Not Registered yet ? <a href="/auth/registration/u">Register Here</a><br />
              <a href="/auth/forgot-password">Forgot Your Password?</a>
            </div>
            <button type="submit" class="btn btn-primary px-4">Login</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Modal Booking -->
<div
  class="modal fade"
  id="bookingmodal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="bookingmodal"
  aria-hidden="true"
>
  <div
    class="modal-dialog"
    role="document"
    style="margin: auto !important;width:100%"
  >
    <div class="modal-content mk-border position-relative">
      <div class="modal-header">
        <h5 class="modal-title w-100 text-center">
          Booking
        </h5>
        <button
          type="button"
          #closebutton
          class="close position-absolute"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body pb-4">
        <form role="form" [formGroup]="bookingForm" (ngSubmit)="bookApointment()">
          <div class="form-row">

            <div class="col-md-12 mb-3">
              <label>Name <span class="text-danger">*</span></label>
              <input
                type="text"
                class="form-control"
                formControlName="name"
                placeholder="Enter Your Name"
              />
              <div *ngIf="submitted" class="error-msg">
                <small *ngIf="f.name.errors"  class="text-danger">
                    Name is required
                </small>
              </div>
            </div>
            <div class="col-md-12 mb-3">
              <label>Email Address <span class="text-danger">*</span></label>
              <input
                type="text"
                class="form-control"
                formControlName="email"
                placeholder="Enter Your Email Address"
              />
              <div *ngIf="submitted" class="error-msg">
                <small *ngIf="f.email.errors"  class="text-danger">
                    Email is required
                </small>
              </div>
            </div>
            <div class="col-md-12 mb-3">
              <label>Phone <span class="text-danger">*</span></label>
              <input
                type="number"
                formControlName="phone"
                class="form-control"
                placeholder="Enter Your Phone Number"
              />
              <div *ngIf="submitted" class="error-msg">
                <small *ngIf="f.phone.errors"  class="text-danger">
                    Phone is required
                </small>
              </div>
            </div>
            <div class="col-md-12 mb-3">
              <label>Timing <span class="text-danger">*</span></label>
              <div class="row">
                <div  class="col-md-6" *ngFor="let item of timingList; let i = index"> 
                  <label for="{{item.id}}">
                      <input class="radio" type="checkbox" value="{{item.name}}" required id="{{item.id}}" (change)="timingSelected($event)"
                      formControlName="timing"/>
                      <span class="text-body">{{item.name}}</span>
                      
                  </label>
                </div>
                <div class="col-sm-12">
                  <div *ngIf="submitted" class="error-msg">
                    <small *ngIf="f.timing.errors"  class="text-danger">
                        Booking timing is required
                    </small>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-12 mb-3">
              <input 
              class="form-control" [owlDateTime]="dt1" [min]="minDate" [owlDateTimeTrigger]="dt1" placeholder="Date Time"
              formControlName="bookingDateTime">
              <owl-date-time #dt1 [startAt]="startDate"></owl-date-time>
              <div *ngIf="submitted" class="error-msg">
                <small *ngIf="f.bookingDateTime.errors"  class="text-danger">
                  Booking Date is required
                </small>
              </div>
            </div>
            <div class="col-md-12 mb-3">
              <label>Notes</label>
              <textarea
                class="form-control"
                type="text"
                formControlName="note"></textarea>
              
            </div>

            <div class="col-md-12 text-right">
              <button type="submit" class="btn btn-primary">Save</button>
          </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>