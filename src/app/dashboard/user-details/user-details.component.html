<ngx-spinner bdColor="#fff" size="medium" color="#fff">
  <p style="font-size: 20px; color: white" class="loaderbg">
    <img src="assets/img/favicon.jpg" class="loader-logo" width="100" />
  </p>
</ngx-spinner>
<section class="pt-5 pb-5 bg-light heightH-100">
  <div class="container">
    <h2 class="ttle-bott-bor mb-5">Personal Details</h2>
    <agm-map [latitude]="userDetails.latitude" [longitude]="userDetails.longitude" [scrollwheel]="true" [zoom]="zoom"
      [fullscreenControl]="true" [mapTypeId]="'hybrid'">
      <agm-marker [latitude]="userDetails.latitude" [longitude]="userDetails.longitude"></agm-marker>
    </agm-map>
    <form role="form" class="form-row" (ngSubmit)="save()" #updateDetailForm="ngForm">
      <div class="col-md-12 text-center">
        <div class="upload-img">
          <img [src]="(userDetails.profileImage &&  (userDetails.profileImage | json) != '{}' )? 'https://prompthealth.ca:3000/users/'+userDetails.profileImage : '../../../assets/img/no-image.jpg'" alt="User image">
          <input name="imageUrl" type="file"  (change)="handleImageChange($event)" />
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label *ngIf="roles === 'C'; else firstNameLabel">Name <span class="text-danger">*</span></label>
        <ng-template #firstNameLabel>
          <label>First Name <span class="text-danger">*</span></label>
        </ng-template>
        <input autofocus type="text" id="firstName" name="firstName" class="form-control" placeholder="" minlength="3"
          maxlength="50" (keyup)="trim('firstName')" #firstName="ngModel" [ngModel]="userDetails.firstName"
          (ngModelChange)="userDetails.firstName = $event" required />

        <div class="error-block">
          <small *ngIf="firstName.errors?.required && firstName.touched" class="text-danger">
            First name is required.
          </small>
          <small *ngIf="firstName.errors?.minlength && firstName.touched" class="text-danger">
            Minumum length should be 3.
          </small>
        </div>
      </div>
      <div class="col-md-6 mb-3" *ngIf="roles !== 'C'">
        <label>Last Name <span class="text-danger">*</span></label>
        <input autofocus type="text" id="lastName" name="lastName" class="form-control" placeholder="" minlength="3"
          maxlength="50" (keyup)="trim('lastName')" #lastName="ngModel" [ngModel]="userDetails.lastName"
          (ngModelChange)="userDetails.lastName = $event" required />

        <div class="error-block">
          <small *ngIf="lastName.errors?.required && lastName.touched" class="text-danger">
            Last name is required.
          </small>
          <small *ngIf="lastName.errors?.minlength && lastName.touched" class="text-danger">
            Minumum length should be 3.
          </small>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label>Phone <span class="text-danger">*</span></label>
        <input
          autofocus
          type="text"
          id="phone"
          name="phone"
          class="form-control"
          placeholder=""
          maxlength="12"
          (keyup)="trim('phone')"
          #phone="ngModel"
          [ngModel]="userDetails.phone"
          (ngModelChange)="userDetails.phone = $event"
          required 
          pattern="^[0-9]*$"
        />

        <div class="error-block">
          <small *ngIf="phone.errors?.required && phone.touched" class="text-danger">
            Phone number is required.
          </small>
          <small *ngIf="phone.errors" class="text-danger">
            Phone number not valid.
          </small>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label>Email <span class="text-danger">*</span></label>
        <input autofocus type="email" id="email" 
        [disabled] = "true" name="email" class="form-control" placeholder=""
          (keyup)="trim('email')" #email="ngModel" [ngModel]="userDetails.email" />
      </div>
      <div class="col-md-6 mb-3"  *ngIf="roles !== 'C'">
        <div class="row">
          <div class="col-md-12">
            <label>Gender <span class="text-danger">*</span></label>
          </div>
          <div class="radio col-md-6 mb-3">
            <input type="radio" value="female" name="gender" #gender="ngModel" [(ngModel)]="userDetails.gender"
              required />
            <span>Female</span>
          </div>
          <div class="radio col-md-6 mb-3">
            <input type="radio" value="male" name="gender" #gender="ngModel" [(ngModel)]="userDetails.gender"
              required />
            <span>Male</span>
          </div>
          <div class="error-block">
            <small *ngIf="gender.errors?.required && gender.touched" class="text-danger">
              Gender is required.
            </small>
          </div>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label>Address (<b>Please select suggested Google address</b>)<span class="text-danger">*</span></label>
        <input type="text" id="address" name="address" class="form-control" placeholder="" (keyup)="trim('address')"
          #address="ngModel" #search [ngModel]="userDetails.address" required />

        <div class="error-block">
          <small *ngIf="address.errors?.required && address.touched" class="text-danger">
            Address is required.
          </small>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label>City <span class="text-danger">*</span></label>
        <input type="text" id="city" name="city" class="form-control" placeholder="" minlength="3" maxlength="50"
          (keyup)="trim('city')" #city="ngModel" [ngModel]="userDetails.city" required disabled="disabled"/>

        <div class="error-block">
          <small *ngIf="city.errors?.required && city.touched" class="text-danger">
            City is required.
          </small>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label>State <span class="text-danger">*</span></label>
        <input type="text" id="state" name="state" class="form-control" placeholder="" minlength="3" maxlength="50"
          (keyup)="trim('state')" #state="ngModel" [ngModel]="userDetails.state" required disabled="disabled"/>

        <div class="error-block">
          <small *ngIf="state.errors?.required && state.touched" class="text-danger">
            State is required.
          </small>
          <small *ngIf="state.errors?.minlength && state.touched" class="text-danger">
            Minumum length should be 3.
          </small>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label>Postal Code <span class="text-danger">*</span></label>
        <input type="text" id="zipcode" name="zipcode" class="form-control" placeholder="" minlength="3" maxlength="50"
          (keyup)="trim('zipcode')" #zipcode="ngModel" [ngModel]="userDetails.zipcode" required disabled="disabled"/>

        <div class="error-block">
          <small *ngIf="zipcode.errors?.required && zipcode.touched" class="text-danger">
            Postal code is required.
          </small>
          <small *ngIf="zipcode.errors?.minlength && zipcode.touched" class="text-danger">
            Minumum length should be 3.
          </small>
        </div>
      </div>
      <div class="col-md-6 mb-3" *ngIf="roles === 'SP'">
        <div class="radio form-row mb-3">
            <label>What is your professional association<span class="text-danger">*</span></label>
            <input autofocus type="text" id="professional_organization" name="professional_organization" class="form-control"
              (keyup)="trim('professional_organization')" #professional_organization="ngModel" [ngModel]="userDetails.professional_organization" number
              (ngModelChange)="userDetails.professional_organization = $event" required />
            <div class="error-block">
              <small *ngIf="professional_organization.errors?.required && professional_organization.touched" class="text-danger">
                Professional is required.
              </small>
            </div>
        </div>
      </div>
      <div class="col-md-6 mb-3" *ngIf="roles === 'SP'">
        <div class="radio form-row mb-3">
          <label>List your certification(s)/degree(s)<span class="text-danger">*</span></label>
          <input autofocus type="text" id="certification" name="certification" class="form-control"
            (keyup)="trim('certification')" #certification="ngModel" [ngModel]="userDetails.certification" number
            (ngModelChange)="userDetails.certification = $event" required />
          <div class="error-block">
            <small *ngIf="certification.errors?.required && certification.touched" class="text-danger">
              Certitification is required.
            </small>
          </div>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <div class="row">
          <div class="col-md-12">
            <label>Do you have a booking system <span class="text-danger">*</span></label>
          </div>
          <div class="radio col-md-6 mb-3">
            <input type="radio" value="yes" name="booking" #booking="ngModel" [(ngModel)]="userDetails.booking"
              required />
            <span>Yes</span>
          </div>
          <div class="radio col-md-6 mb-3">
            <input type="radio" value="no" name="booking" #booking="ngModel" [(ngModel)]="userDetails.booking"
              required />
            <span>No</span>
          </div>
          <div class="error-block">
            <small *ngIf="booking.errors?.required && booking.touched" class="text-danger">
              Booking option is required.
            </small>
          </div>
        </div>
      </div>
      <div class="col-md-6 mb-3" *ngIf="userDetails.booking === 'yes'">
        <label>Booking Url <span class="text-danger">*</span></label>
        <input autofocus type="text" id="bookingURL" name="URL" class="form-control" placeholder="" (keyup)="trim('bookingURL')" #URL="ngModel" [ngModel]="userDetails.bookingURL"
          (ngModelChange)="userDetails.bookingURL = $event" required />

        <div class="error-block">
          <small *ngIf="URL.errors?.required && URL.touched" class="text-danger">
            Booking URL is required.
          </small>
          <small *ngIf="URL.errors?.minlength && URL.touched" class="text-danger">
            Minumum length should be 3.
          </small>
        </div>
      </div>
      <div class="col-md-12 mb-3" *ngIf="roles === 'C' || roles === 'SP'">
        <label>What is your price range per hour ? <span class="text-danger">*</span></label>
        <div class="row">
          <div class="radio col-md-4">
            <input type="radio" value="" name="price_per_hours" #price_per_hours="ngModel"
              [(ngModel)]="userDetails.price_per_hours"  />
            <span>Not Critical</span>
          </div>
        <div class="radio col-md-4">
          <input type="radio" value="< $50" name="price_per_hours" #price_per_hours="ngModel"
            [(ngModel)]="userDetails.price_per_hours"/>
          <span>
            < $50</span>
        </div>
        <div class="radio col-md-4 mb-3">
          <input type="radio" value="$50-100" name="price_per_hours" #price_per_hours="ngModel"
            [(ngModel)]="userDetails.price_per_hours"/>
          <span>$50-100</span>
        </div>
        <div class="radio col-md-4 mb-3">
          <input type="radio" value="$100-200" name="price_per_hours" #price_per_hours="ngModel"
            [(ngModel)]="userDetails.price_per_hours"/>
          <span>$100-200</span>
        </div>
        <div class="radio col-md-4 mb-3">
          <input type="radio" value="$200-500" name="price_per_hours" #price_per_hours="ngModel"
            [(ngModel)]="userDetails.price_per_hours"/>
          <span>$200-500</span>
        </div>
        <div class="radio col-md-4 mb-3">
          <input type="radio" value="$500-1000" name="price_per_hours" #price_per_hours="ngModel"
            [(ngModel)]="userDetails.price_per_hours"  />
          <span>$500-1000</span>
        </div>
        <div class="radio col-md-4 mb-3">
          <input type="radio" value="$1000" name="price_per_hours" #price_per_hours="ngModel"
            [(ngModel)]="userDetails.price_per_hours"  />
          <span>> $1000</span>
        </div>
      </div>
        <!-- <div class="error-block">
          <small *ngIf="price_per_hours.errors?.required && price_per_hours.touched" class="text-danger">
            Price is required.
          </small>
        </div> -->
      </div>
      <div class="col-md-12 mb-3" *ngIf="roles === 'C' || roles === 'SP'">
        <label>What is the range of your clients ? <span class="text-danger">*</span></label>
        <div class="row">
        <div class="radio col-md-4 mb-3"  *ngFor="let item of ageRangeList; let i = index">
          <!-- <input type="radio" value="5eb1a4e199957471610e6cd7" name="age_range" #age_range="ngModel" [(ngModel)]="userDetails.age_range"
            required />
          <span>Not Critical</span> -->
          <label for="{{item.id}}" >
            <input class="radio" type="checkbox" required name="age_range" (change)="checkBoxChanged($event, 'ageRange')" [value]="item.id" required id="{{item.id}}"/>
            <span class="" style="margin-left: 5px;">{{item.name}}</span>
        </label>
        </div>
      </div>
        <!-- <div class="error-block">
          <small *ngIf="age_range.errors?.required && age_range.touched" class="text-danger">
            Age range is required.
          </small>
        </div> -->
      </div>
      <div class="col-md-12 mb-3" *ngIf="roles === 'C'">
        <label>What kind of a business are you ? <span class="text-danger">*</span></label>
        <div class="row">
        <div class="radio col-md-4 mb-3">
          <input type="radio" value="clinic" name="business_kind" #business_kind="ngModel"
            [(ngModel)]="userDetails.business_kind" required />
          <span>
            Clinic</span>
        </div>
        <div class="radio col-md-4 mb-3">
          <input type="radio" value="health_center" name="business_kind" #business_kind="ngModel"
            [(ngModel)]="userDetails.business_kind" required />
          <span>Health Center</span>
        </div>
        <div class="radio col-md-4 mb-3">
          <input type="radio" value="health_club" name="business_kind" #business_kind="ngModel"
            [(ngModel)]="userDetails.business_kind" required />
          <span>Health Club</span>
        </div>
        <div class="radio col-md-4 mb-3">
          <input type="radio" value="gym" name="business_kind" #business_kind="ngModel"
            [(ngModel)]="userDetails.business_kind" required />
          <span>Gym</span>
        </div>
        <div class="radio col-md-4 mb-3">
          <input type="radio" value="studio" name="business_kind" #business_kind="ngModel"
            [(ngModel)]="userDetails.business_kind" required />
          <span>Studio</span>
        </div>
        <div class="radio col-md-4 mb-3">
          <input type="radio" value="pharmacy " name="business_kind" #business_kind="ngModel"
            [(ngModel)]="userDetails.business_kind" required />
          <span>Pharmacy </span>
        </div>
        <!-- <div class="error-block">
          <small *ngIf="business_kind.errors?.required && business_kind.touched" class="text-danger">
            Business is required.
          </small>
        </div> -->
      </div>
    </div>  
    <div class="col-md-12 mb-3" *ngIf="roles === 'C' || roles === 'SP'">
      <label>How many years of experience do you have ? <span class="text-danger">*</span></label>
      <div class="row">
      <div class="radio col-md-4 mb-3">
        <input type="radio" value="< 5" name="years_of_experience" #years_of_experience="ngModel"
          [(ngModel)]="userDetails.years_of_experience" required />
        <span>
          < 5 years</span>
      </div>
      <div class="radio col-md-4 mb-3">
        <input type="radio" value="5-10" name="years_of_experience" #years_of_experience="ngModel"
          [(ngModel)]="userDetails.years_of_experience" required />
        <span>5-10 years</span>
      </div>
      <div class="radio col-md-4 mb-3">
        <input type="radio" value="10-20" name="years_of_experience" #years_of_experience="ngModel"
          [(ngModel)]="userDetails.years_of_experience" required />
        <span>10-20 years</span>
      </div>
      <div class="radio col-md-4 mb-3">
        <input type="radio" value="> 20" name="years_of_experience" #years_of_experience="ngModel"
          [(ngModel)]="userDetails.years_of_experience" required />
        <span>> 20 years </span>
      </div>
      </div>
      <!-- <div class="error-block">
        <small *ngIf="years_of_experience.errors?.required && years_of_experience.touched" class="text-danger">
          Experience is required.
        </small>
      </div> -->
    </div>
    <div class="col-md-12 mb-3" *ngIf="roles === 'C' || roles === 'SP'">
      <label *ngIf="roles === 'SP'">What languages are you fluent in?</label>
      <label *ngIf="roles === 'C'">What languages do you offer?</label>
      <div class="row">
        <div  class="col-md-4" *ngFor="let item of languageQuestion?.answers; let i = index">
                        
          <label for="{{item._id}}">

              <input class="radio" type="checkbox" required id="{{item._id}}" (change)="checkBoxChanged($event, 'languageQuestion')"/>
              <span class="">{{item.item_text}}</span>
          </label>
        </div>
      </div>
    </div>
    <div class="col-md-12 mb-3" *ngIf="roles === 'C' || roles === 'SP'">
      <label>What are your typical hours?</label>
      <div class="row">
        <div  class="col-md-4" *ngFor="let item of avalibilityQuestion?.answers; let i = index">
                        
          <label for="{{item._id}}">

              <input class="radio" type="checkbox" required id="{{item._id}}" (change)="checkBoxChanged($event, 'avalibilityQuestion')"/>
              <span class="">{{item.item_text}}</span>
          </label>
        </div>
      </div>
    </div>
    <div class="col-md-12 mb-3">
      <!-- <label>What is your Service Type ?</label> -->
      <label>How is your service delivered ?</label>
      <div class="row">
        <div  class="col-md-4" *ngFor="let item of serviceQuestion?.answers; let i = index">
                        
          <label for="{{item._id}}">

              <input class="radio" type="checkbox" required id="{{item._id}}" (change)="checkBoxChanged($event, 'serviceType')"/>
              <span class="">{{item.item_text}}</span>
          </label>
        </div>
      </div>
    </div>
    <div class="col-md-12 mb-3" *ngIf="roles === 'C' || roles === 'SP'">
      <label>Tell us more about you in a paragraph (optional) <span class="text-danger"></span></label>
        <textarea rows="4" cols="50" minlength="3" id="product_description" name="product_description"
          class="form-control" (keyup)="trim('product_description')" #product_description="ngModel"
          [ngModel]="userDetails.product_description" (ngModelChange)="userDetails.product_description = $event">
          Product Description...</textarea>
    </div>

    <div class="col-md-12 mb-3">
      <label class="mb-0"><input type="checkbox" [(ngModel)]="userDetails.accredited_provide_canada" [ngModelOptions]="{standalone: true}" class="mr-2"> I verify I am an accredited Provider in Canada <span class="text-danger">*</span></label>
    </div>
    <div class="col-md-12 mb-2 text-right">
      <button class="btn btn-primary" [disabled]="!updateDetailForm.valid">
        Submit
      </button>
    </div>
  </form>
  </div>
</section>